#  Лабораторная работа. Настройка расширенных сетей VLAN, VTP и DTP
	
	Топология
	
![](/Labworks/Lec-02_Lab02/img/scheme.jpg "Топология")


	Таблица адресации
	
|Узел		|Интерфейс		|IP-адреса		|Маска подсети		|
|----------:|:-------------:|:-------------:|:------------------|
|S1			|VLAN99			|192.168.99.1	|255.255.255.0		|
|S2			|VLAN99			|192.168.99.2	|255.255.255.0		|
|S3			|VLAN99			|192.168.99.3	|255.255.255.0		|
|PC A		|NIC			|192.168.10.1	|255.255.255.0		|
|PC B		|NIC			|192.168.20.2	|255.255.255.0		|
|PC C		|NIC			|192.168.10.2	|255.255.255.0		|


###  Задачи
1. Настройка VTP
2. Настройка DTP
3. Добавление сетей VLAN и назначение портов
4. Настройка расширенной сети VLAN

----
#### 1. Настройка VTP
Все коммутаторы будут настроены на использование VTP для обновлений сетей VLAN. 
S2 будет настроен в качестве сервера. 
Коммутаторы S1 и S3 будут настроены как клиенты. 
Они будут входить в домен VTP CCNA с паролем cisco.

----
#### 2. Настройка DTP
##### 2.1:	Настроить динамические магистральные каналы между S1 и S2.
a.	Введите команду show interfaces f0/1 switchport на коммутаторах S1 и S2.
Какой административный и оперативный режим у коммутационного порта f0/1?
Коммутатор S1
```
S1#sh int e0/1 switchport
Name: Et0/1
Switchport: Enabled
Administrative Mode: dynamic auto
Operational Mode: static access
```
Коммутатор S2
```
S2#sh int e0/1 switchport
Name: Et0/1
Switchport: Enabled
Administrative Mode: dynamic auto
Operational Mode: static access
```

##### 2.2:	Настроить статический магистральный канал между S1 и S3.
d.	Запишите команды, использованные для создания статической магистрали.
```
S1(config-if)#switchport trunk encapsulation dot1q
S1(config-if)#switchport mode trunk
```
----
#### 3:	Добавление сетей VLAN и назначение портов
##### 3.1:	Добавьте сети VLAN на коммутаторах.
a.	На коммутаторе S1 добавить сеть VLAN 10.

Вопрос
:	Удалось ли вам создать сеть VLAN 10 на коммутаторе S1? Поясните ответ.

Ответ
:	НЕТ. В режиме ***Client VTP*** можно создать vlan только из расширенного диапазона
`
VTP VLAN configuration not allowed when device is in CLIENT mode.
`

b.	Добавите следующие сети VLAN на коммутаторе S2.


|VLAN	|Имя	|
|------:|:-----:|
|10		|Red	|
|20		|Blue	|
|30		|Yellow	|
|99		|Management	|

##### 3.2:	Проверить обновления VTP на коммутаторах S1 и S3.
Так как коммутатор S2 настроен как VTP-сервер, а коммутаторы S1 и S3 настроены как VTP-клиенты, коммутаторы S1 и S3 должны получить и применить информацию о сети VLAN от коммутатора S2.

Вопрос
:	Какие команды show вы использовали для проверки обновлений VTP на коммутаторах S1 и S3?

Ответ
:	Использовались команды:
`
#show vtp status 
`
`
#show vlan
`
`
#shov vlan brief
`

##### Назначение портов сетям VLAN.
Задача
:	Связать порты с сетями VLAN и настроить IP-адреса согласно следующей таблице.

Назначение портов	|VLAN		|IP-адреc и префикс прикрепленного компьютера	
:------------------:|:---------:|:---------------------------------------------:
S1 F0/6			|VLAN 10	|PC-A: 192.168.10.1 /24
S2 F0/18		|VLAN 20	|PC-B: 192.168.20.1 /24
S3 F0/18		|VLAN 10	|PC-C: 192.168.10.2 /24

Порт в задаче | Используемый порт
:------------:|:-------------------:
S1 F0/6		|S1 e1/1
S2 F0/18	|S2 e1/3
S3 F0/18	|S3 e1/3

#### 3.4:	Проверьте наличие сквозного соединения
a.	Отправьте ping-запрос с компьютера PC-B на PC-A и проверьте результат. Поясните ответ.

Ответ:
Неудачно.
![ping_PCB-PCA](/Labworks/Lec-02_Lab02/img/pic1.jpg "ping-запрос с компьютера PC-B на PC-A")

```
PC-B> ping 192.168.10.1
No gateway found
```
Сетевые адреса компьютеров настроены на разные диапазоны (подсети). 
Порты коммутаторов для этих компьютеров настроены на разные виратульные сети. 


b.	Отправьте ping-запрос с компьютера PC-A на PC-C и проверьте результат. Поясните ответ.

Ответ:
Удачно.
![ping_PCA-PCC](/Labworks/Lec-02_Lab02/img/pic2.jpg "ping-запрос с компьютера PC-A на PC-C")

Компьютеры находятся в одной подсети. 
Порты коммутаторов для этих компьютеров находятся в одной виртуальной сети (VLAN 10).


c.	Отправьте ping-запрос с коммутатора S1 на компьютер PC-A. Была ли проверка успешной? Поясните ответ.

Ответ:
Неудачно. 

d.	Отправьте ping-запрос с коммутатора S2 на коммутатор S1. Была ли проверка успешной? Поясните ответ.

Ответ:
Удачно. 
![ping_PCA-PCC](/Labworks/Lec-02_Lab02/img/pic4.jpg "ping-запрос с компьютера PC-A на PC-C")

IP-адреса SVI интерфейсов коммутаторов настроены на одну подсеть.

----
#### 4:	Настройка сети VLAN расширенного диапазона
##### 4.1:	Перевести VTP на коммутаторе S1 в прозрачный режим

```
S1#sh vtp status
VTP Version capable             : 1 to 3
VTP version running             : 1
VTP Domain Name                 : CCNA
VTP Pruning Mode                : Disabled
VTP Traps Generation            : Disabled
Device ID                       : aabb.cc00.1000
Configuration last modified by 0.0.0.0 at 0-0-00 00:00:00

Feature VLAN:
--------------
VTP Operating Mode                : Transparent
Maximum VLANs supported locally   : 1005
Number of existing VLANs          : 9
Configuration Revision            : 0
MD5 digest                        : 0x2E 0xAA 0x03 0x25 0xFA 0x5D 0x67 0x83
                                    0x3A 0x75 0xCA 0x8C 0xF4 0xB0 0x4B 0xDE
```

##### 4.2:	Настройте сеть VLAN расширенного диапазона на коммутаторе S1
a.	Отобразите текущие конфигурации сети VLAN на коммутаторе S1.
b.	Создайте сеть VLAN 2000 расширенного диапазона.
c.	Проверьте, что сеть VLAN создана правильно.

Результат проверки
```
S1#sh vlan brief

VLAN Name                             Status    Ports
---- -------------------------------- --------- -------------------------------
1    default                          active    Et0/0, Et0/2, Et1/0, Et1/2
                                                Et1/3
10   Red                              active    Et1/1
20   Blue                             active
30   Yellow                           active
99   Management                       active
1002 fddi-default                     act/unsup
1003 token-ring-default               act/unsup
1004 fddinet-default                  act/unsup
1005 trnet-default                    act/unsup
2000 VLAN2000                         active
S1#
```


